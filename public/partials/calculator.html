<div id="calculator-container">

	<div class="row">
		<div id="content" class="col-md-10 col-md-offset-1 col-xs-12">
			<!-- <p>Hi! This is YATTO. This is a web-app made to help you optimize your relic spending and various other things. To use this, enter in your artifact, hero level, weapon, and customization values below, then enter in some options under "Efficiency Calculator" and "Methods," then hit "Calculate."</p> -->
			<div class="row">
				<div id="options-box" class="panel col-md-12">
					<div class="row">
						<div id="options-subbox-1" class="options-block col-md-4">
							<h3>Efficiency Calculator:</h3>
							<div id="options-relics" class="small-form-item">
								Relics to spend: <input type="number" class="form-control number-input right-input" ng-model="relics" min="0" ng-change="stateChanged()"/>
							</div>
							<div id="options-nsteps" class="small-form-item">
								Steps to calculate: <input type="number" class="form-control number-input right-input" ng-model="nsteps" min="0" ng-change="stateChanged()"/>
							</div>
							<br>
							<div id="options-greedy" ng-init="greedy=1">
								<p>Calculation method:</p>
								<div class="small-form-item">
									<label><input type="radio" ng-model="greedy" value="1">Greedy</label>
								</div>
								<div class="small-form-item">
									<label><input type="radio" ng-model="greedy" value="0" disabled="true">Dynamic Programming (in progress!)</label>
								</div>
							</div>

							<button class="btn btn-primary" id="calculate-button" ng-click="calculate()">Calculate</button>
							<span us-spinner="{radius:4, width:3, length: 5}" spinner-key="spinner"></span>

							<div id="random-info-box">
								<div class="small-form-item">
									<label>All damage:</label>
									<input type="number" class="form-control number-input right-input random-input" ng-model="all_damage" readonly/>
								</div>
								<div class="small-form-item">
									<label>Tap damage:</label>
									<input type="number" class="form-control number-input right-input random-input" ng-model="tap_damage" readonly/>
								</div>
							</div>
						</div>

						<div id="options-subbox-2" class="options-block col-md-4">
							<div id="options-methods">
								<h3>Methods:</h3>
								<div ng-repeat="m in methods" class="method-options small-form-item">
									<label><input type="checkbox" ng-model="methods[$index].value" ng-change="stateChanged()"/> {{m.name}}</label>
								</div>
							</div>

							<div id="stage-relic-box">
								<div class="small-form-item">
									<label>Stage:</label>
									<input type="number" class="form-control number-input right-input" ng-model="r_cstage" ng-change="stateChanged()"/>
								</div>
								<div class="small-form-item">
									<label>UA Level:</label>
									<input type="number" class="form-control number-input right-input" ng-model="r_undead" ng-change="stateChanged()"/>
								</div>
								<div class="small-form-item">
									<label>Total hero levels:</label>
									<input type="number" class="form-control number-input right-input" ng-model="r_levels" ng-change="stateChanged()"/>
								</div>
								<div class="small-form-item">
									<label>Next breakpoint:</label>
									<input type="number" class="form-control number-input right-input" ng-model="r_nextbp" readonly/>
								</div>
								<div class="small-form-item">
									<label>Relics:</label>
									<input type="number" class="form-control number-input right-input" ng-model="r_reward" readonly/>
								</div>
								<div class="small-form-item">
									<label>Relics at next breakpoint:</label>
									<input type="number" class="form-control number-input right-input" ng-model="r_atnext" readonly/>
								</div>
							</div>
						</div>

						<div id="options-subbox-3" class="options-block col-md-4">
							<h3>Other Stuff:</h3>
							Automatically save cookies:</br>
							<div class="btn-group">
								<label class="btn btn-primary cookiebtn" ng-model="autocookies" btn-radio="'On'" ng-change="updateCookies()">On</label>
								<label class="btn btn-primary cookiebtn" ng-model="autocookies" btn-radio="'Off'" ng-change="updateCookies()">Off</label>
							</div>

							<button class="btn btn-success" ng-click="storeToCookies()">Save cookies</button>
							<button class="btn btn-success" ng-click="readFromCookies()">Load from cookies</button>
							<button class="btn btn-danger" ng-click="clearAllCookies()">Clear cookies</button>

							<div id="weapons-info">
								<div class="small-form-item">
									<label id="chi">\(\chi^2\)</label>&nbsp;<label>Probability:</label>
									<input type="number" class="form-control number-input right-input" ng-model="w_chiprob" readonly/>
								</div>
								<div class="small-form-item">
									<label>Current total:</label>
									<input type="number" class="form-control number-input right-input" ng-model="w_totalwp" readonly/>
								</div>
								<div class="small-form-item">
									<label>Weapons to next set:</label>
									<input type="number" class="form-control number-input right-input" ng-model="w_tonexts" readonly/>
								</div>
								<div class="small-form-item">
									<label>If I get this many weapons:</label>
									<input type="number" class="form-control number-input right-input" ng-model="w_getting" ng-change="stateChanged()"/>
								</div>
								<div class="small-form-item">
									<label>Probability to get next set:</label>
									<input type="number" class="form-control number-input right-input" ng-model="w_probset" readonly/>
								</div>
							</div>
						</div> <!-- options subbox 4 -->
					</div> <!-- row -->
					<div class="row" id="state-row">
						<div class="col-xs-3 state-buttons">
							<button class="btn btn-info" id="load-state-button" ng-click="importFromString(state)">Load from state string</button>
							<button class="btn btn-info" id="update-state-button" ng-click="generateStateString()">Generate state string</button>
						</div>

						<div class="col-xs-8">
							<textarea type="text" rows="4" class="form-control text-input" id="state-input" ng-model="state"/>
						</div>
					</div>
				</div> <!--options-box-->
			</div> <!-- row -->
			<div class="row">
				<div class="col-md-7" id="artifact-weapon-col">
					<div id="inputs-box" class="panel">
						<div class="row">
							<!-- <h2 class="title">Enter your info here:</h2> -->
							<div id="artifacts-list" class="list col-md-5">
								<h3>Artifact Levels:</h3>
								<div ui-sortable="sortableOptions" ng-model="artifacts">
									<div class="form-item transition" ng-repeat='a in artifacts'>
										<span class="fa fa-arrows myHandle"></span>
										<input type="number" class="form-control number-input left-input artifact-input" ng-model="a.value" min="0" max="{{artifact_caps[a.index]}}" ng-change="artifactCheck($index, a.index)" ng-class="{'at-cap': a.value==artifact_caps[a.index]}"/>
										<div class="input-label">{{a.name}}</div>
									</div>
								</div>
							</div>
							<div id="weapons-list" class="list col-md-6">
								<h3>Heroes (Levels / Weapons):</h3>
								<div ng-repeat="h in heroes" class="form-item">
									<input type="number" class="form-control number-input left-input level-input" ng-model="heroes[$index].level" min="0" ng-change="heroesCheck($index)"/>
									<input type="number" class="form-control number-input left-input weapon-input" ng-model="heroes[$index].weapons" min="0" ng-change="heroesCheck($index)" tabindex="{{$index+1}}"/>
									<div class="input-label">{{h.name}}</div>
								</div>
							</div>
						 <!-- artifacts and weapons -->
						</div>
						<div class="row">
							<div id="customizations-list" class="list col-md-12">
								<h3>Bonuses from Customizations:</h3>
								<p>(In decimal form - if you have 32%, enter 0.32, not 32)</p>
								<div ng-repeat="c in customizations" class="form-item">
									<input type="text" class="form-control number-input left-input" ng-model="customizations[$index].value" ng-change="customizationCheck($index)" min="0" step="{{customizations[$index].step}}"/>
									<div class="input-label">{{c.name}}</div>
								</div>
							</div>
						</div>
					</div> <!-- inputs box -->
				</div>
				<div class="col-md-5" id="steps-col">
					<div id="steps-box" class="panel">
						<div id="steps-summary-container">
							<div>
								<button id="reset-steps" class="btn btn-primary" ng-click="resetSteps()">Reset steps</button>
							</div>
							<tabset>
								<tab ng-repeat="method in methods" heading="{{method.tabname}}" disabled="!method.value">
									<h3 ng-if="steps[method.index] == null">{{stepmessage}}</h3>
									<div id="summary-list" class="list">
										<h3 ng-if="summary_steps[method.index].length > 0" class="animate-if">Summary:</h3>
										<table ng-if="summary_steps[method.index].length > 0" class="animate-if">
											<tr>
												<th class="ssteps-colh0 colh"></th>
												<th class="ssteps-colh1 colh">Artifact</th>
												<th class="ssteps-colh2 colh">Level To</th>
												<th class="ssteps-colh3 colh">Cost</th>
											</tr>
											<tr ng-repeat="ss in summary_steps[method.index] track by $index" class="step-row">
												<td class="ssteps-col0"><span class="checkmark" ng-click="step(true, method.index, $index)"><i class="fa fa-check"></i></span></td>
												<td class="ssteps-col1">{{ss.name}}</td>
												<td class="ssteps-col2">{{ss.level}}</td>
												<td class="ssteps-col3">{{ss.cost}}</td>
											</tr>
										</table>
									</div>
									<div id ="steps-list" class="list">
										<h3 ng-if="steps[method.index].length > 0" class="animate-if">Steps:</h3>
										<table ng-if="steps[method.index].length > 0" class="animate-if">
											<tr>
												<th class="steps-colh0 colh"></th>
												<th class="steps-colh1 colh">Artifact</th>
												<th class="steps-colh2 colh">Level</th>
												<th class="steps-colh3 colh">Cost</th>
												<th class="steps-colh4 colh">Total</th>
											</tr>
											<tr ng-repeat="s in steps[method.index] track by $index" class="step-row">
												<td class="steps-col0"><span class="checkmark" ng-click="step(false, method.index, $index)"><i class="fa fa-check"></i></span></td>
												<td class="steps-col1">{{s.name}}</td>
												<td class="steps-col2">{{s.level}}</td>
												<td class="steps-col3">{{s.cost}}</td>
												<td class="steps-col4">{{s.cumulative}}</td>
											</tr>
										</table>
									</div>
								</tab>
							</tabset>
						</div>
					</div> <!-- steps box -->
				</div>
			</div> <!-- row -->
		</div> <!-- content -->
	</div>
</div>
